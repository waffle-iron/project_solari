<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @team.name %>
  <div>TeamMember</div>
  <% @team.users.each do |user| %>
	 <div><%=link_to user.user_name, user_path(user.id) %></div>
  <% end %>
</p>

<% if user_signed_in? %>
  <p><%= link_to "チームに参加する", join_team_path(@team), method: :post %></p>
<% end %>

<%= link_to 'Edit', edit_team_path(@team) %> |
<%= link_to 'Back', teams_path %>

<h2>チャット</h2>
<!-- チャット表示部分 -->
<ul id="chat_area">
</ul>

<!-- コメントフォーム -->
<input id="comment" type="text">
<input id="send" type="button" value="send">

<script>
  var ws_rails = new WebSocketRails("localhost:3000/websocket");

  // メッセージ受信時の処理
  ws_rails.bind("websocket_chat", function(message){
    var message_li = document.createElement("li");
    message_li.textContent = message;
    document.getElementById("chat_area").appendChild(message_li);
  })

  // メッセージ送信時の処理
  document.getElementById("send").onclick =  function(){
　　var comment = document.getElementById("comment").value;
　　ws_rails.trigger("websocket_chat", comment);
  }

</script>
